# OSGL (Oregon State University Glider Laboratory)

## A collectioin of scripts I use for processing TWR Slocum gliders.

Please see 
[dbd2netcdf](https://github.com/mousebrains/dbd2netcdf)
which converts the Dinkum Binary Data files from the glider into NetCDF files.

- [Examples](Examples) are some example scripts for how I use these scripts
- [Data](Data) is an example pair of NetCDF files generated by [dbd2netcdf](https://github.com/mousebrains/dbd2netcdf)

# Scripts
- [osgl_adjust_lat_lon](osgl_adjust_lat_lon.m) adjust the dead reckoned `m_lat` and `m_lon` to match the GPS fixes when leaving the surface and arriving back at the surface. It assumes a linear in time transform.
- [osgl_bin_profiles](osgl_bin_profiles.m) Depth and profile bin data. See [tpw_make_profiles](Examples/tpw_make_profiles.m) for a sample usage.
- [osgl_calculate_seawater_properties](osgl_calculate_seawater_properties.m) adds depth, practical and absolute salinity, conservative temperature, potential temperature, potential density and in-situ density to the structure. See [Gibbs Sea Water](https://www.teos-10.org/pubs/gsw/html/gsw_contents.html) for a description of the calculations. See [tpw_make_profiles](Examples/tpw_make_profiles.m) for a sample usage.
- [osgl_cast_intervals](osgl_cast_intervals.m) find the different dive, climb, top turn, bottom turn, and surface states of a glider. This uses the output of [osgl_glider_state](osgl_glider_state.m).
- [osgl_dive_climb_times](osgl_dive_climb_times.m) returns a triplet of times, the start of a dive, the time between the dive and climb, and the top of the climb. See [tpw_make_profiles](Examples/tpw_make_profiles.m) for a sample usage.
- [osgl_fit_gaussian](osgl_fit_gaussian.m) fits one or more gaussians to a dataset. It includes plotting of the indivual gaussians.
- [osgl_getnetCDF](osgl_getnetCDF.m) reads in a NetCDF file and if it follows the [CF Metadata Convetions](https://cfconventions.org)
- [osgl_glider_state](osgl_glider_state.m) extracts the operational state of the glider from `cc_behavior_state`. i.e. inflecting, diving, climbing, hovering, surfacing, ...
- [osgl_load_glider](osgl_load_glider.m) loads in the output of [dbd2netcdf](https://github.com/mousebrains/dbd2netcdf) into a table. Creates a column, `time` which is a `datetime`, and also translates lat/lon variables from degrees\*100+minutes to decimal degrees. See [tpw_make_profiles](Examples/tpw_make_profiles.m) for a sample usage.
- [osgl_mkDegrees](osgl_mkDegrees.m) converts from degrees\*100+minutes to decimal degrees.
- [osgl_plot_pcolor](osgl_plot_pcolor.m) uses `pcolor` but deals with blank times.
- [osgl_read_netCDF](osgl_read_netCDF.m) loads a NetCDF file. The [CF Metadata Convetions](https://cfconventions.org) is not followed. See [osgl_getnetCDF](osgl_getnetCDF.m) for CF compliant NetCDF files.
- [osgl_vmp_plot](osgl_vmp_plot.m) generate reasonably pretty plots VMP turbulence plots.
